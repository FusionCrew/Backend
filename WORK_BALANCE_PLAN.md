# ⚖️ 백엔드 업무 균형 및 충돌 방지 전략

본 문서는 백엔드 팀원 간의 업무 부하를 평준화하고, 개발 중 발생할 수 있는 코드 및 데이터 충돌을 최소화하기 위한 가이드를 제공합니다.

---

## 📊 1. 최적화된 업무 분배 (부하 평준화)

이다하 님에게 집중되었던 인증(Auth) 업무를 이대연 님에게 재배치하여 전체적인 작업량을 균등하게 맞췄습니다.

### 👤 이다하 (핵심 비즈니스 로직) - [Order, Stock, Cart]

* **담당 기능**: 주문 생성/취소/확정, 대기표 발급, 장바구니 관리, 재고 관리 및 품절 처리
* **엔티티 소유권**: `Order`, `OrderItem`, `Stock`, `Cart`, `CartItem`
* **핵심 미션**: 키오스크의 매출과 직결되는 주문-재고 흐름의 무결성 보장

### 👤 김나영 (데이터 및 사용자 경험) - [Menu, Feedback, Kiosk]

* **담당 기능**: 메뉴/재료 CRUD 및 매핑, 사용자 메뉴 조회, 추천 메뉴, 피드백 제출, 헬스체크
* **엔티티 소유권**: `Menu`, `Ingredient`, `MenuIngredient`, `Feedback`
* **핵심 미션**: 정확한 상품 정보 제공 및 사용자 피드백 루프 구축

### 👤 유현곤 (운영 및 정산) - [Payment, Staff, Dashboard]

* **담당 기능**: 결제 시스템 전체, 티켓 호출/완료, 직원 호출 처리, 세션 관리, 대시보드 통계 및 AI 로그
* **엔티티 소유권**: `Payment`, `Ticket`, `KioskSession`, `StaffCall`
* **핵심 미션**: 안정적인 결제 처리 및 관리자를 위한 운영 인사이트 제공

### 👤 이대연 (보안 및 연동 인프라) - [Auth, AI Proxy]

* **담당 기능**: 관리자 로그인/로그아웃/토큰 관리(Auth), FastAPI 프록시 개발 (Spring ↔ FASTAPI 연동)
* **엔티티 소유권**: `AdminUser`
* **핵심 미션**: 전사적인 보안 인프라 구축 및 AI 서버와의 안정적인 통신 레이어 제공

---

## 🛡️ 2. 충돌 방지 전략 (Conflict-Free)

### 1) 엔티티 소유권 준수 (Entity Ownership)

- **수정 권한**: 각 담당자만 자신의 소유 엔티티를 수정(Update/Delete)할 수 있습니다.
* **참조 권한**: 다른 담당자의 엔티티는 '조회(Read)'만 하거나 연관 관계(`@ManyToOne` 등)로만 연결합니다.
  * *예: 이다하(Order)는 김나영(Menu) 엔티티를 수정할 수 없으며, 참조만 하여 주문을 생성합니다.*

### 2) 서비스 간 통신 (Service Interfacing)

- 도메인 간 로직이 겹칠 경우 직접 DB를 건드리지 않고, 상대방의 `Service`를 호출하여 처리합니다.
  * *예: 주문 완료 시 이다하(OrderService)가 유현곤(PaymentService)의 메서드를 호출하여 결제 프로세스 시작.*

### 3) 패키지 격리 (Package Isolation)

- `domain/{domain_name}/` 구조를 엄격히 준수하여 자신의 영역이 아닌 파일은 건드리지 않습니다.

---

## 🕙 3. 권장 개발 순서 (Dependency Flow)

엔티티 간의 의존성을 고려할 때 아래 순서로 기초 작업을 권장합니다.

1. **기초 인프라 (이대연)**: `SecurityConfig`, `JWT` 세팅 및 `AdminUser` 엔티티 생성
2. **기준 정보 (김나영)**: `Menu`, `Ingredient` 엔티티 생성 (모든 주문의 기초 데이터)
3. **트랜잭션 데이터 (이다하, 유현곤)**: `Order`, `Stock`, `Payment`, `Ticket` 엔티티 순차 생성

---

## 📈 4. 담당자별 API 수 추정치 (밸런스 확인)

| 담당자 | 관련 API 수 (추정) | 작업 난이도 |
| :--- | :---: | :--- |
| **이다하** | 약 14개 | 상 (주무/재고 트랜잭션 복잡도) |
| **김나영** | 약 17개 | 중 (CRUD 및 다채로운 조회 로직) |
| **유현곤** | 약 15개 | 중 (결제 연동 및 데이터 가공) |
| **이대연** | 약 8개 + 프록시 | 상 (보안 아키텍처 및 외부 서버 연동) |

**위 분배를 통해 팀원 모두가 비슷한 양의 업무를 처리하면서도 전문성을 살릴 수 있습니다.**
